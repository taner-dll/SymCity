{% extends 'base.html.twig' %}

{% block title %}Ürün Güncelle{% endblock %}

{% block body %}

    <div class="box">
        <div class="box-header with-border">
            <h3 class="box-title">Ürün Güncelle</h3>
        </div>
        <div class="box-body">
            <div class="row">
                <div class="col-sm-6">
                    {{ include('product/_form.html.twig') }}
                </div>
                <div class="col-sm-6">
                    {% if product.picture != "" %}
                    <img src="{{ asset('uploads/products/')~product.picture }}" class="img-responsive"
                         style="border: 1px solid gray"
                         height="125" width="200">
                    <input type="hidden" name="file_name" value="{{ product.picture }}" />

                    <!-- sadece resim kaldır -->
                        <br><a class="btn btn-danger"
                               href="{{ path('product_edit', {'id':product.id, 'resim_kaldir':1}) }}">Resim Kaldır</a>
                    {% endif %}
                </div>
            </div>

        </div>
        <!-- /.box-body -->
        <div class="box-footer">
            <button class="btn btn-success" style="margin-right: 10px;">{{ button_label|default('Güncelle') }}</button>
            {{ form_end(form) }}


            <a href="{{ path('product_show', {'id': product.id}) }}" class="btn btn-primary"
               style="margin-right: 10px;">Geri Dön</a>
        </div>
        <!-- /.box-footer-->
    </div>


{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script type="application/javascript">

        $(document).ready(function(){
            //console.log("ready");

            const property = "{{ product.property }}";

            if(property === 'custom'){
                $('#product_collection').css('display','none');
                $('label[for="product_collection"]').css('visibility', 'hidden');
            }
        });

        $('#product_property').on('change', function () {
            if (this.value === 'collection'){
                $('#product_collection').css('display','block');
                $('label[for="product_collection"]').css('visibility', 'visible');
            }
            else {
                $('#product_collection').css('display','none');
                $('label[for="product_collection"]').css('visibility', 'hidden');
            }
        });


    </script>

{% endblock %}